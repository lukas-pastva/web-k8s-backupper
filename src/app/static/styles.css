/* Theme variables */
:root{
  /* Dark palette */
  --bg-dark:#0b1020;--panel-dark:#121836;--text-dark:#e6e9f5;--muted-dark:#9aa3c1;--accent-dark:#6ea8fe;--accent2-dark:#7bd88f;--border-dark:#242b4a;--code-bg-dark:#0e1330;--code-text-dark:#b7c0e6;
  /* Light palette */
  --bg-light:#f7f9ff;--panel-light:#ffffff;--text-light:#0b1020;--muted-light:#465674;--accent-light:#215cdd;--accent2-light:#1d7a3d;--border-light:#dbe0ea;--code-bg-light:#f1f4fb;--code-text-light:#22344a;
  /* Defaults (dark) */
  --bg:var(--bg-dark);--panel:var(--panel-dark);--text:var(--text-dark);--muted:var(--muted-dark);--accent:var(--accent-dark);--accent2:var(--accent2-dark);--border:var(--border-dark);--code-bg:var(--code-bg-dark);--code-text:var(--code-text-dark);
  /* Buttons */
  --btn-bg: var(--accent);
  --btn-fg: #ffffff;
  --btn-hover: #95c0ff;
}

/* Explicit theme overrides */
:root[data-theme="dark"]{--bg:var(--bg-dark);--panel:var(--panel-dark);--text:var(--text-dark);--muted:var(--muted-dark);--accent:var(--accent-dark);--accent2:var(--accent2-dark);--border:var(--border-dark);--code-bg:var(--code-bg-dark);--code-text:var(--code-text-dark);--btn-bg:var(--accent-dark);--btn-fg:#ffffff;--btn-hover:#95c0ff}
:root[data-theme="light"]{--bg:var(--bg-light);--panel:var(--panel-light);--text:var(--text-light);--muted:var(--muted-light);--accent:var(--accent-light);--accent2:var(--accent2-light);--border:var(--border-light);--code-bg:var(--code-bg-light);--code-text:var(--code-text-light);--btn-bg:var(--accent-light);--btn-fg:#ffffff;--btn-hover:#4d88f5}

/* Auto theme mirrors system preference (also applies before JS sets data-theme) */
@media (prefers-color-scheme: light){
  :root:not([data-theme]),:root[data-theme="auto"]{--bg:var(--bg-light);--panel:var(--panel-light);--text:var(--text-light);--muted:var(--muted-light);--accent:var(--accent-light);--accent2:var(--accent2-light);--border:var(--border-light);--code-bg:var(--code-bg-light);--code-text:var(--code-text-light);--btn-bg:var(--accent-light);--btn-fg:#ffffff;--btn-hover:#4d88f5}
}
@media (prefers-color-scheme: dark){
  :root[data-theme="auto"]{--bg:var(--bg-dark);--panel:var(--panel-dark);--text:var(--text-dark);--muted:var(--muted-dark);--accent:var(--accent-dark);--accent2:var(--accent2-dark);--border:var(--border-dark);--code-bg:var(--code-bg-dark);--code-text:var(--code-text-dark);--btn-bg:var(--accent-dark);--btn-fg:#ffffff;--btn-hover:#95c0ff}
}

*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color-scheme:light dark}
header{position:sticky;top:0;z-index:500;padding:20px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;flex-wrap:wrap;background:var(--panel)}
h1{font-size:20px;margin:0}h2{font-size:16px;margin:16px 0}
.subtitle{color:var(--muted)}
.back{color:var(--muted);text-decoration:none}.back:hover{color:var(--text)}
.actions{margin-left:auto;display:flex;gap:10px;align-items:center}
/* Header layout helpers */
.header-left{display:flex;flex-direction:column;gap:4px}
.header-right{margin-left:auto;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
/* Use full available width across pages for wider grids */
main{padding:20px;max-width:none;width:100%;margin:0}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
.cards#pvcs,#pvcs.cards,#pvcs{grid-template-columns:repeat(auto-fill,minmax(380px,1fr))}
.card{background:var(--panel);border:1px solid var(--border);padding:14px;border-radius:10px;text-decoration:none;color:var(--text);display:flex;flex-direction:column;gap:6px}
.card .title{font-weight:600}.card .desc{color:var(--muted);font-size:12px}
/* Ensure PVC cards are comfortably tall */
#pvcs .card{min-height:40px}
.button{display:inline-flex;align-items:center;gap:8px;background:var(--btn-bg);color:var(--btn-fg);border:1px solid transparent;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:600}
.button.sm{padding:2px 6px;font-size:12px}
.button:hover{background:var(--btn-hover);border-color:var(--btn-hover)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:12px}
.panel{background:var(--panel);border:1px solid var(--border);border-radius:10px}
.panel-title{padding:10px 12px;border-bottom:1px solid var(--border);font-weight:600}
.panel-body{padding:10px 12px;color:var(--muted)}
.panel-list{display:flex;flex-direction:column;gap:8px}
/* Limit object lists so panels don't overgrow the page */
.panel-body.panel-list{max-height:320px;overflow:auto;-webkit-overflow-scrolling:touch}
.obj-item{display:block;background:var(--code-bg);border:1px solid var(--border);padding:6px 8px;border-radius:6px;color:var(--code-text);text-decoration:none}
.obj-item:hover{border-color:var(--accent);color:var(--text)}
.hint{color:var(--muted)}.error{color:#ff9aa2}
code{background:var(--code-bg);border:1px solid var(--border);padding:2px 6px;border-radius:6px;color:var(--code-text)}

/* Breadcrumbs */
.breadcrumbs{color:var(--muted);display:flex;gap:8px;align-items:center;font-size:12px}
.breadcrumbs a{color:inherit;text-decoration:none;border-bottom:1px dotted transparent}
.breadcrumbs a:hover{color:var(--text);border-bottom-color:var(--border)}
.breadcrumbs .sep{opacity:.6}
.breadcrumbs .current{color:var(--text);font-weight:600}

/* When breadcrumbs follow the page title, give them a full row */
header > #ns-title + .breadcrumbs{flex-basis:100%}

/* Modal for manifest preview */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:flex-start;justify-content:center;padding:40px;z-index:1000}
.modal[hidden]{display:none !important;opacity:0;visibility:hidden;pointer-events:none}
.modal .box{background:var(--panel);border:1px solid var(--border);border-radius:10px;max-width:min(1000px,90vw);width:100%;max-height:80vh;display:flex;flex-direction:column;overflow:hidden}
.modal .modal-header{display:flex;gap:8px;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border)}
.modal .modal-header .title{font-weight:600}
.modal .content{margin:0;padding:12px;background:var(--code-bg);color:var(--code-text);overflow:auto;white-space:pre}
/* Allow normal wrapping text in generic content */
.modal .content-text{white-space:normal}

/* Responsive tweaks for mobile */
@media (max-width: 720px){
  header{padding:12px}
  main{padding:12px}
  h1{font-size:18px}
  h2{font-size:15px;margin:12px 0}
  .header-right{margin-left:0;flex-basis:100%;justify-content:flex-start}
}
@media (max-width: 520px){
  /* Stack filter rows vertically */
  .filter-row{flex-direction:column;align-items:stretch}
  .filter-row label{min-width:0}
  /* Make grids single-column to avoid sideways scroll */
  .cards{grid-template-columns:1fr}
  #pvcs{grid-template-columns:1fr}
  .grid{grid-template-columns:1fr}
  .obj-item{padding:10px 12px}
  /* Let object lists use viewport height for better use of space */
  .panel-body.panel-list{max-height:40vh}
  /* Modal fits tighter on phones */
  .modal{padding:12px}
  .modal .box{max-height:85vh}
}
